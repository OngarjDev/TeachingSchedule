@page "/CreateTable"
@using TeachingSchedule.Models;

<PageTitle>เพิ่มข้อมูล/สร้างตาราง</PageTitle>
<div class="container m-0 p-3">
    <div class="row">
        <div class="col-xl-3 col-lg-4">
            <Card>
                <CardBody>
                    <h3>วิชาเรียน</h3>
                    <div class="input-group">
                        <Dropdown Class="w-100">
                            <DropdownToggleButton Class=" border border-black" Color="ButtonColor.Light" Size="Size.ExtraLarge">โปรดเลือกวิชาเรียน</DropdownToggleButton>
                            <DropdownMenu>
                                <DropdownItem To="#" Type="ButtonType.Link">สมศรี</DropdownItem>
                                <hr />
                                <DropdownItem To="#" Type="ButtonType.Link" Disabled="true">หากไม่มีข้อมูลโปรดเพิ่มข้อมูลก่อน</DropdownItem>
                            </DropdownMenu>
                        </Dropdown>
                        <Button Class="w-100 mt-2" Color="ButtonColor.Primary" @onclick="OnAddSubject"><Icon Name="IconName.PlusLg"></Icon> เพิ่มวิชาเรียน</Button>
                    </div>
                </CardBody>
            </Card>
        </div>
        <div class="col-xl-3 col-lg-4">
            <Card>
                <CardBody>
            <h3>คุณครู</h3>
            <div class="input-group">
                <Dropdown Class="w-100">
                    <DropdownToggleButton Class=" border border-black" Color="ButtonColor.Light" Size="Size.ExtraLarge">โปรดเลือกคุณครูผู้สอน</DropdownToggleButton>
                    <DropdownMenu>
                        <DropdownItem To="#" Type="ButtonType.Link">สมศรี</DropdownItem>
                        <hr />
                        <DropdownItem To="#" Type="ButtonType.Link" Disabled="true">หากไม่มีข้อมูลโปรดเพิ่มข้อมูลก่อน</DropdownItem>
                    </DropdownMenu>
                </Dropdown>

                <Button Class="w-100 mt-2" Color="ButtonColor.Primary"><Icon Name="IconName.PlusLg"></Icon> เพิ่มรายชื่อคุณครู</Button>
            </div>
            </CardBody>
            </Card>
        </div>
        <div class="col-xl-3 col-lg-4">
            <Card>
                <CardBody>
                    <h3>ห้องเรียน</h3>
                    <div class="input-group">
                        <Dropdown Class="w-100">
                            <DropdownToggleButton Class=" border border-black" Color="ButtonColor.Light" Size="Size.ExtraLarge">โปรดเลือกรายการ</DropdownToggleButton>
                            <DropdownMenu>
                                <DropdownItem To="#" Type="ButtonType.Link">สมศรี</DropdownItem>
                                <hr />
                                <DropdownItem To="#" Type="ButtonType.Link" Disabled="true">หากไม่มีข้อมูลโปรดเพิ่มข้อมูลก่อน</DropdownItem>
                            </DropdownMenu>
                        </Dropdown>
                        <Button Class="w-100 mt-2" Color="ButtonColor.Primary"><Icon Name="IconName.PlusLg"></Icon> เพิ่มห้องเรียน</Button>
                    </div>
                </CardBody>
            </Card>
        </div>
        <div class="col-xl-3 col-lg-4">
            <Card>
                <CardBody>
                    <h3>ชั้นเรียน</h3>
                    <div class="input-group">
                        <Dropdown Class="w-100">
                            <DropdownToggleButton Class=" border border-black" Color="ButtonColor.Light" Size="Size.ExtraLarge">โปรดเลือกห้องที่จะสอน</DropdownToggleButton>
                            <DropdownMenu>
                                <DropdownItem To="#" Type="ButtonType.Link">สมศรี</DropdownItem>
                                <hr />
                                <DropdownItem To="#" Type="ButtonType.Link" Disabled="true">หากไม่มีข้อมูลโปรดเพิ่มข้อมูลก่อน</DropdownItem>
                            </DropdownMenu>
                        </Dropdown>
                        <Button Class="w-100 mt-2" Color="ButtonColor.Primary"><Icon Name="IconName.PlusLg"></Icon> เพิ่มชั้นเรียน</Button>
                    </div>
                </CardBody>
            </Card>
        </div>
    </div>
    <div class="row mt-3">
        <Tooltip Class="me-4" Title="ระบบจะสร้างตารางสุ่มขึ้นมา ตามข้อมูลที่เกี่ยวข้องกรณีห้องเรียน,ครู,วิชาเรียน ไม่พอระบบจะมีตัวเลือก 2 ทางคือ 1.คัดเลือกครูตัวแทน(ที่ว่าง) 2.ยกเลิกชั้นเรียน ศึกษาข้อมูลเพิ่มเติมได้ที่คู่มือการใช้">
        <Switch @bind-Value="AutoCrateTable" Label="อนุญาต สุ่มตารางเรียนตามวิชาเอกอาจารย์,วิชาที่ชั้นเรียนนั้นต้องเรียน,ห้องเรียนประจำชั้น" />
        </Tooltip>
        <Button Class="w-100 mt-3" Color="ButtonColor.Success"> สร้างตารางสอน </Button>
    </div>
</div>
<hr />
<TableViewComponent/>


<Modal @ref="modal" CloseOnEscape="ActiveModal" title="ฟอร์มเพิ่มข้อมูล">
    <BodyTemplate>
        @switch (FormType)
        {
        case "Subject":
    <EditForm Model="subject" OnValidSubmit="OnAddSubject">
            <div class="mb-3">
                <label class="form-label">Amount</label>
                    <InputText @bind-Value="@NameSubject" Placeholder="" />
                </div>
                </EditForm>
                break;
@*             case "Teacher":
                <div class="mb-3">
                            <label class="form-label">Amount</label>
                    <InputText TValue="int" @bind-Value="@NameSubject" Placeholder="Enter amount" />
                </div>
                break; *@
        }
    </BodyTemplate>
    <FooterTemplate>
        <Button Color="ButtonColor.Secondary" @onclick="OnHideModalClick">ยกเลิก</Button>
        <Button Color="ButtonColor.Primary">ดำเนินการต่อ</Button>
    </FooterTemplate>
</Modal>

@code{
    public Subject subject { get; set; }
    private Modal modal = default!;
    private bool ActiveModal { get; set; } = false;
    private string? FormType { get; set; } 
    public bool AutoCrateTable { get; set; }
    public string NameSubject { get; set; }


    private async Task OnShowModalClick()
    {
        await modal.ShowAsync();
    }

    private async Task OnHideModalClick()
    {
        await modal.HideAsync();
    }
    public async Task OnAddClass()
    {
        
    }
    public async Task OnRoom()
    {
        
    }
    public async Task OnAddTeacher()
    {
        
    }
    public async Task OnAddSubject()
    {
        if (ActiveModal == false)
        {
            FormType = "Subject";
            await OnShowModalClick();
        }
        else
        {
            
        }
    }

}
